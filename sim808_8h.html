<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>GPS tracker code documentation: sim808.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GPS tracker code documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sim808.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Prototypes of functions that communicate with the SIM808 module and control it and definition of related parameters.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &quot;main.h&quot;</code><br/>
</div>
<p><a href="sim808_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSIM808__typedef.html">SIM808_typedef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">is used to abstract the SIM808 hardware interface. It will decouple the functions from the hardware (uart+pins) used to interface with the module. The UART peripheral used to send AT commands to the module and the UART used to send Debug messages and the pins used to power on, reset and check status of the module are combined together in this struct. This struct will be passed to all the functions that perform actions on the module.  <a href="structSIM808__typedef.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a84820ae6c2b7143c1692312a0e3d7069"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a84820ae6c2b7143c1692312a0e3d7069">AT_uart</a>&#160;&#160;&#160;<a class="el" href="sim808_8c.html#a2cf715bef37f7e8ef385a30974a5f0d5">huart1</a></td></tr>
<tr class="separator:a84820ae6c2b7143c1692312a0e3d7069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e23ff1d2d0704f67d286589f8de591a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a2e23ff1d2d0704f67d286589f8de591a">debug_uart</a>&#160;&#160;&#160;<a class="el" href="sim808_8c.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></td></tr>
<tr class="separator:a2e23ff1d2d0704f67d286589f8de591a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac80a3592e72fd96b772ee47a7d8e0d0a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ac80a3592e72fd96b772ee47a7d8e0d0a">DEBUG_MODE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ac80a3592e72fd96b772ee47a7d8e0d0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb508ea8227673f419e9fe3a86c30d8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:abb508ea8227673f419e9fe3a86c30d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90cac659d18e8ef6294c7ae337f6b58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa90cac659d18e8ef6294c7ae337f6b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8cecfc5c5c054d2875c03e77b7be15d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa8cecfc5c5c054d2875c03e77b7be15d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93f0eb578d23995850d61f7d61c55c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aa93f0eb578d23995850d61f7d61c55c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01649d652fa50957c6ef3c32b1238038"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a01649d652fa50957c6ef3c32b1238038">GREEN_LED</a>&#160;&#160;&#160;GPIO_PIN_13</td></tr>
<tr class="separator:a01649d652fa50957c6ef3c32b1238038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b2fcfd54f428237d20020cc37fdf688"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a2b2fcfd54f428237d20020cc37fdf688">RX_WAIT</a>&#160;&#160;&#160;200 /* After sending AT command, wait RX_WAIT ms  to ensure that the reply is receeived in the buffer */</td></tr>
<tr class="separator:a2b2fcfd54f428237d20020cc37fdf688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6426fc74901f4fbec94862ebb672b81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ab6426fc74901f4fbec94862ebb672b81">RX_TIMEOUT</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:ab6426fc74901f4fbec94862ebb672b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad380e380939eae9a5d6c8f228f0fe7c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ad380e380939eae9a5d6c8f228f0fe7c8">TX_TIMEOUT</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:ad380e380939eae9a5d6c8f228f0fe7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4455691936f92fdd6c37566fc58ba1f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ad4455691936f92fdd6c37566fc58ba1f">BAUD_RATE</a>&#160;&#160;&#160;38400 /* BAUD_RATE=38400 =&gt; it take 26 ms to send 100 bytes */</td></tr>
<tr class="separator:ad4455691936f92fdd6c37566fc58ba1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a261abd5cc14d407d98b157fdb035a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a23a261abd5cc14d407d98b157fdb035a">RX_BUFFER_LENGTH</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a23a261abd5cc14d407d98b157fdb035a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9154a20ff62f3e0eb4ccffb3f9dacaf2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a9154a20ff62f3e0eb4ccffb3f9dacaf2">SIM_UART</a>&#160;&#160;&#160;<a class="el" href="sim808_8c.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></td></tr>
<tr class="separator:a9154a20ff62f3e0eb4ccffb3f9dacaf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace21428290f0e412332701391f825a10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ace21428290f0e412332701391f825a10">DEBUG_UART</a>&#160;&#160;&#160;<a class="el" href="sim808_8c.html#a2cf715bef37f7e8ef385a30974a5f0d5">huart1</a></td></tr>
<tr class="separator:ace21428290f0e412332701391f825a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab89edd66c8efe44885d367f9ca958cbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ab89edd66c8efe44885d367f9ca958cbc">TCP_CONNECT_TIMEOUT</a>&#160;&#160;&#160;5 /* value in second */</td></tr>
<tr class="separator:ab89edd66c8efe44885d367f9ca958cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed8c16215b62dac1431ed1eadb277bdd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#aed8c16215b62dac1431ed1eadb277bdd">GPS_COORDINATES_LENGTH</a>&#160;&#160;&#160;23</td></tr>
<tr class="separator:aed8c16215b62dac1431ed1eadb277bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2605f3426f7113811f78dd74ec94b36f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a2605f3426f7113811f78dd74ec94b36f">sim_init</a> (<a class="el" href="structSIM808__typedef.html">SIM808_typedef</a> *sim)</td></tr>
<tr class="memdesc:a2605f3426f7113811f78dd74ec94b36f"><td class="mdescLeft">&#160;</td><td class="mdescRight">it initialises the <a class="el" href="structSIM808__typedef.html" title="is used to abstract the SIM808 hardware interface. It will decouple the functions from the hardware (...">SIM808_typedef</a> struct members and powers on the module. initializes the UARTs and the GPIOs used to power on, reset and check the status of the module. Which UART peripheral is used for what is specified in the parameter <a class="el" href="structSIM808__typedef.html" title="is used to abstract the SIM808 hardware interface. It will decouple the functions from the hardware (...">SIM808_typedef</a> members: AT_uart and debug_uart.  <a href="#a2605f3426f7113811f78dd74ec94b36f">More...</a><br/></td></tr>
<tr class="separator:a2605f3426f7113811f78dd74ec94b36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c7f4c93f5788ac46dcd5ba3332332a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a11c7f4c93f5788ac46dcd5ba3332332a">sim_power_off</a> (<a class="el" href="structSIM808__typedef.html">SIM808_typedef</a> *sim)</td></tr>
<tr class="memdesc:a11c7f4c93f5788ac46dcd5ba3332332a"><td class="mdescLeft">&#160;</td><td class="mdescRight">power_off the module.  <a href="#a11c7f4c93f5788ac46dcd5ba3332332a">More...</a><br/></td></tr>
<tr class="separator:a11c7f4c93f5788ac46dcd5ba3332332a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e8d14d18e682e3c7716ecf3683f95a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#ad3e8d14d18e682e3c7716ecf3683f95a">system_reset</a> (<a class="el" href="structSIM808__typedef.html">SIM808_typedef</a> *sim)</td></tr>
<tr class="memdesc:ad3e8d14d18e682e3c7716ecf3683f95a"><td class="mdescLeft">&#160;</td><td class="mdescRight">power_off the module and reset the MCU  <a href="#ad3e8d14d18e682e3c7716ecf3683f95a">More...</a><br/></td></tr>
<tr class="separator:ad3e8d14d18e682e3c7716ecf3683f95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b959aa2173672d11610c75d5861865"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a30b959aa2173672d11610c75d5861865">send_AT_cmd</a> (const char *cmd, const char *expected_reply, uint8_t save_reply, char *cmd_reply, uint32_t rx_timeout)</td></tr>
<tr class="memdesc:a30b959aa2173672d11610c75d5861865"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends a cmd to the module, if the parameter save_reply == 1 then it copies the reply into the parameter cmd_reply.  <a href="#a30b959aa2173672d11610c75d5861865">More...</a><br/></td></tr>
<tr class="separator:a30b959aa2173672d11610c75d5861865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b4cf1ea76700c13ed5d1f0ee23765a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a76b4cf1ea76700c13ed5d1f0ee23765a">send_serial_data</a> (uint8_t *data, uint8_t length, char *cmd_reply, uint32_t rx_wait)</td></tr>
<tr class="memdesc:a76b4cf1ea76700c13ed5d1f0ee23765a"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends raw serial data to the SIM808 module through the AT_uart peripheral. Then it deletes the receive buffer.  <a href="#a76b4cf1ea76700c13ed5d1f0ee23765a">More...</a><br/></td></tr>
<tr class="separator:a76b4cf1ea76700c13ed5d1f0ee23765a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e14828149893fb70f1cee3155436042"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a6e14828149893fb70f1cee3155436042">send_debug</a> (const char *debug_msg)</td></tr>
<tr class="memdesc:a6e14828149893fb70f1cee3155436042"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends a debug message through the debug UART  <a href="#a6e14828149893fb70f1cee3155436042">More...</a><br/></td></tr>
<tr class="separator:a6e14828149893fb70f1cee3155436042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699ae4103a5d99b6bebdfcf3d440a75a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a699ae4103a5d99b6bebdfcf3d440a75a">send_raw_debug</a> (uint8_t *debug_dump, uint8_t length)</td></tr>
<tr class="separator:a699ae4103a5d99b6bebdfcf3d440a75a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f05954d16de4c033a7aca1abd6455d4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sim808_8h.html#a1f05954d16de4c033a7aca1abd6455d4">is_subarray_present</a> (const uint8_t *array, size_t array_len, const uint8_t *subarray, size_t subarray_len)</td></tr>
<tr class="separator:a1f05954d16de4c033a7aca1abd6455d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Prototypes of functions that communicate with the SIM808 module and control it and definition of related parameters. </p>
<dl class="section author"><dt>Author</dt><dd>Mohamed Boubaker </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000002">Bug:</a></b></dt><dd>issue #9 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a84820ae6c2b7143c1692312a0e3d7069"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT_uart&#160;&#160;&#160;<a class="el" href="sim808_8c.html#a2cf715bef37f7e8ef385a30974a5f0d5">huart1</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad4455691936f92fdd6c37566fc58ba1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUD_RATE&#160;&#160;&#160;38400 /* BAUD_RATE=38400 =&gt; it take 26 ms to send 100 bytes */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac80a3592e72fd96b772ee47a7d8e0d0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_MODE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2e23ff1d2d0704f67d286589f8de591a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define debug_uart&#160;&#160;&#160;<a class="el" href="sim808_8c.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ace21428290f0e412332701391f825a10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_UART&#160;&#160;&#160;<a class="el" href="sim808_8c.html#a2cf715bef37f7e8ef385a30974a5f0d5">huart1</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abb508ea8227673f419e9fe3a86c30d8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FAIL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa93f0eb578d23995850d61f7d61c55c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALSE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aed8c16215b62dac1431ed1eadb277bdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPS_COORDINATES_LENGTH&#160;&#160;&#160;23</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a01649d652fa50957c6ef3c32b1238038"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GREEN_LED&#160;&#160;&#160;GPIO_PIN_13</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a23a261abd5cc14d407d98b157fdb035a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_BUFFER_LENGTH&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab6426fc74901f4fbec94862ebb672b81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_TIMEOUT&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2b2fcfd54f428237d20020cc37fdf688"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_WAIT&#160;&#160;&#160;200 /* After sending AT command, wait RX_WAIT ms  to ensure that the reply is receeived in the buffer */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9154a20ff62f3e0eb4ccffb3f9dacaf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIM_UART&#160;&#160;&#160;<a class="el" href="sim808_8c.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa90cac659d18e8ef6294c7ae337f6b58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUCCESS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab89edd66c8efe44885d367f9ca958cbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCP_CONNECT_TIMEOUT&#160;&#160;&#160;5 /* value in second */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa8cecfc5c5c054d2875c03e77b7be15d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRUE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad380e380939eae9a5d6c8f228f0fe7c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TX_TIMEOUT&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1f05954d16de4c033a7aca1abd6455d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t is_subarray_present </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>array_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>subarray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>subarray_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a30b959aa2173672d11610c75d5861865"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t send_AT_cmd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>save_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rx_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sends a cmd to the module, if the parameter save_reply == 1 then it copies the reply into the parameter cmd_reply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>is the AT command to be sent </td></tr>
    <tr><td class="paramname">expected_reply</td><td>is used to determine if the outcome of the function is SUCCESS or FAIL. </td></tr>
    <tr><td class="paramname">save_reply</td><td>if set to 1, then the reply from the module gets copied into cmd_reply. </td></tr>
    <tr><td class="paramname">cmd_reply</td><td>is an array where to modules reply is copied. </td></tr>
    <tr><td class="paramname">rx_timeout</td><td>the maximum amount of time the function will wait for the module to receive a reply. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS if the module replies withing timeout and the reply includes the expected_reply, FAIL otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a6e14828149893fb70f1cee3155436042"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_debug </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>debug_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sends a debug message through the debug UART </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debug_message</td><td>is the debug message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a699ae4103a5d99b6bebdfcf3d440a75a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_raw_debug </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>debug_dump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a76b4cf1ea76700c13ed5d1f0ee23765a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t send_serial_data </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rx_wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sends raw serial data to the SIM808 module through the AT_uart peripheral. Then it deletes the receive buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>contains the command </td></tr>
    <tr><td class="paramname">rx_wait</td><td>waiting time before exit. To make sure the reply is received. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2605f3426f7113811f78dd74ec94b36f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sim_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSIM808__typedef.html">SIM808_typedef</a> *&#160;</td>
          <td class="paramname"><em>sim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>it initialises the <a class="el" href="structSIM808__typedef.html" title="is used to abstract the SIM808 hardware interface. It will decouple the functions from the hardware (...">SIM808_typedef</a> struct members and powers on the module. initializes the UARTs and the GPIOs used to power on, reset and check the status of the module. Which UART peripheral is used for what is specified in the parameter <a class="el" href="structSIM808__typedef.html" title="is used to abstract the SIM808 hardware interface. It will decouple the functions from the hardware (...">SIM808_typedef</a> members: AT_uart and debug_uart. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sim</td><td>is the definition of the sim808 hardware </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS if module is ready for use, FAIL otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a11c7f4c93f5788ac46dcd5ba3332332a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sim_power_off </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSIM808__typedef.html">SIM808_typedef</a> *&#160;</td>
          <td class="paramname"><em>sim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>power_off the module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sim</td><td>is the definition of the sim808 hardware </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS if module is ready for use, FAIL otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ad3e8d14d18e682e3c7716ecf3683f95a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void system_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSIM808__typedef.html">SIM808_typedef</a> *&#160;</td>
          <td class="paramname"><em>sim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>power_off the module and reset the MCU </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sim</td><td>is the definition of the sim808 hardware </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
